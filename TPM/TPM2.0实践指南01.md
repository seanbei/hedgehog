# 第一章 TPM发展史
可信平台模块（简称 `TPM`）是一个加密协同处理器，用在大多数商用计算机和服务器上。对于计算机而言，`TPM` 几乎无处不在，但是，由于使用 `TPM` 的应用程序很少引人关注，直到现在，用户基本还是没有意识到它的存在。这种情况正在迅速改变。最近，联邦信息处理标准（`FIPS`）授予各种 `TPM` 设计认证，再加上总统顾问委员会开始建议美国政府使用 `TPM` 来保护国家计算机，`TPM` 已成为计算机所有者保护其加密资产的战略资产。事实上，很少有人对 `TPM` 有深入的了解，能够有利地使用它们，这也是本书的写作动机所在。本章从 `TPM 1.1b` 开始介绍，并描述 `TPM 2.0` 的前世今生。

## 为什么是 `TPM`
在 `20` 世纪 `90` 年代，计算机行业的人越来越清楚地意识到，互联网将改变个人电脑的连接方式，商业也将朝这个环境发展。这立刻让人意识到一种需求，即提高个人电脑的安全性。最初设计个人电脑的时候，很少有人考虑到安全性，因此硬件都不支持。此外，软件的设计也没有考虑安全性，当时易用性是软件开发的主要驱动力。

计算机工程师们聚在一起开发了第一个 `TPMs`，他们试图扭转这个趋势，创造了一个用于计算机系统安全的硬件锚，在上面可以构建安全系统，这帮人最后成为了可信计算组织（`TCG`）的一员。成本压力决定了任何这样的解决方案都必须非常便宜。最终的方案就是将一块 `TPM` 芯片嵌到计算机主板上。`TPM` 命令集的体系结构为其必需的安全用例提供了所有功能，详见第 `3` 章；但是为了降低成本，所有非绝对必要的东西都从芯片转移到了软件上。结果使得 `TPM` 的规范很难阅读，因为当大量的逻辑都留给软件时，如何使用命令就不是那么明确了。这种 `TPM` 规范的不可读性成为了一种趋势，一直延续到了后面所有更新的版本中。

硬件安全是一个很难入手的话题，一份难懂的规范不会有丝毫帮助。要理解这项技术最好还是从它的发展历史开始。
## `TPM` 规范发展史 -- 从 `1.1b` 到 `1.2`
`TPM 1.1b` 是第一个被广泛部署的 `TPM`, 于 `2003` 年发行。尽管还在早期阶段，TPM的基本功能已经能用了，这些功能包括密钥生成（仅限于RSA密钥）、存储、安全授权以及设备健康认证。基于TPM提供的证书，通过匿名身份密钥，即可实现有助于保证隐私的基本功能；创建这些身份密钥需要所有者授权。这时，出现了一种被称为隐私证书颁发机构（CA）的新网络实体，它提供了一种方法来证明在TPM中生成的密钥来自真正的TPM，而不需要识别它来自哪个TPM。

TPM内部预留了一块动态内存区域，叫做平台配置保留寄存器(PCRs)，用于维护系统启动顺序的完整性。PCRs跟身份密钥一起，用于验证系统启动顺序的健康性。由此，基于TPM锚的安全架构开始构建，这也是TCG的主要目标之一。
